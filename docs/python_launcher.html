<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>Visualizer</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://kitware.github.io/visualizer/docs/python_launcher.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://kitware.github.io/visualizer/docs/python_launcher.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/visualizer/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/visualizer/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/visualizer/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/visualizer/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/visualizer/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/visualizer/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/visualizer/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/visualizer/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/visualizer/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/visualizer/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/visualizer/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/visualizer/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/visualizer/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/visualizer/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  <link rel="stylesheet" href="/visualizer/css/navy.css">
  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/visualizer/atom.xml" title="Visualizer">
  <!-- Open Graph -->
  <meta name="description" content="How to use the Python LauncherIntroductionWhen deploying ParaViewWeb for multiple users, you will need a launcher module that will start a new visualization process for each user that requests one.  T">
<meta property="og:type" content="website">
<meta property="og:title" content="Visualizer">
<meta property="og:url" content="https://kitware.github.io/visualizer/docs/python_launcher.html">
<meta property="og:site_name" content="Visualizer">
<meta property="og:description" content="How to use the Python LauncherIntroductionWhen deploying ParaViewWeb for multiple users, you will need a launcher module that will start a new visualization process for each user that requests one.  T">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2024-05-30T15:27:14.851Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Visualizer">
<meta name="twitter:description" content="How to use the Python LauncherIntroductionWhen deploying ParaViewWeb for multiple users, you will need a launcher module that will start a new visualization process for each user that requests one.  T">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90338862-5', 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/visualizer/" id="logo">Visualizer</a>
    </h1>
    <nav id="main-nav">
      <a href="/visualizer/docs/" class="main-nav-link">Docs</a>
      <a href="https://github.com/kitware/visualizer" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name"></h1>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h1 id="How-to-use-the-Python-Launcher" class="article-heading"><a href="#How-to-use-the-Python-Launcher" class="headerlink" title="How to use the Python Launcher"></a>How to use the Python Launcher<a class="article-anchor" href="#How-to-use-the-Python-Launcher" aria-hidden="true"></a></h1><h2 id="Introduction" class="article-heading"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction<a class="article-anchor" href="#Introduction" aria-hidden="true"></a></h2><p>When deploying ParaViewWeb for multiple users, you will need a launcher module that will start a new visualization process for each user that requests one.  This task can be achieved by our Python based launcher described below.</p>
<p>Because the Python launcher is included in ParaViewWeb and requires no extra software to get up and running, it is the recommended approach to launching ParaViewWeb visualization sessions.  This document covers how to configure the Python launcher for use with a front end, including specific details on getting it working with Apache.</p>
<h2 id="Role-of-the-launcher" class="article-heading"><a href="#Role-of-the-launcher" class="headerlink" title="Role of the launcher"></a>Role of the launcher<a class="article-anchor" href="#Role-of-the-launcher" aria-hidden="true"></a></h2><p>The launcher has several specific tasks, all with the common goal of allowing clients to request visualization sessions and then interact with them.  The launcher needs to respond to requests for new sessions by:</p>
<ol>
<li>starting a new process for the user</li>
<li>generating a unique key for that session</li>
<li>communicating that unique key back to both the client and the front end so that the front end knows how to forward subsequent session requests to the correct visualization process</li>
</ol>
<h2 id="Configuration-of-the-launcher" class="article-heading"><a href="#Configuration-of-the-launcher" class="headerlink" title="Configuration of the launcher"></a>Configuration of the launcher<a class="article-anchor" href="#Configuration-of-the-launcher" aria-hidden="true"></a></h2><p>The launcher provides a great deal of flexibility, which can be leveraged by customizing its configuration file.  In this guide, as in the <a href="apache_front_end.html">Apache as a front end</a> guide, we assume you are using Apache as the front end, and we also assume the directory you have chosen for the mapping file is <code>&lt;MAPPING-FILE-DIR&gt;</code>.  The following is an example configuration file:</p>
<p><strong>launcher.config</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ## ===============================</span><br><span class="line">  ## General launcher configuration</span><br><span class="line">  ## ===============================</span><br><span class="line"></span><br><span class="line">  <span class="string">"configuration"</span>: &#123;</span><br><span class="line">    "host" : "localhost",                           # name of network interface to bind for launcher webserver</span><br><span class="line">    "port" : 8080,                                  # port to bind for launcher webserver</span><br><span class="line">    "endpoint": "paraview",                         # SessionManager Endpoint</span><br><span class="line">    "content": "/.../www",                          # Optional: Directory shared over HTTP</span><br><span class="line">    "proxy_file" : "&lt;MAPPING-FILE-DIR&gt;/proxy.txt",  # Proxy-Mapping file for Apache</span><br><span class="line">    "sessionURL" : "ws://$&#123;host&#125;:$&#123;port&#125;/ws",       # ws url used by the client to connect to started process</span><br><span class="line">    "timeout" : 5,                                  # Wait time in second after process start</span><br><span class="line">    "log_dir" : "/.../viz-logs",                    # Directory for log files</span><br><span class="line">    "upload_dir" : "/.../uploadDirectory",          # Start file upload server on same port as launcher</span><br><span class="line">    "fields" : ["file", "host", "port", "updir"]    # Fields not listed are filtered from response</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  ## ===============================</span><br><span class="line">  ## Resources list for applications</span><br><span class="line">  ## ===============================</span><br><span class="line"></span><br><span class="line">  <span class="string">"resources"</span> : [ &#123; <span class="string">"host"</span> : <span class="string">"localhost"</span>, <span class="string">"port_range"</span> : [<span class="number">9001</span>, <span class="number">9003</span>] &#125; ],</span><br><span class="line"></span><br><span class="line">  ## ===============================</span><br><span class="line">  ## Set of properties for cmd line</span><br><span class="line">  ## ===============================</span><br><span class="line"></span><br><span class="line">  <span class="string">"properties"</span> : &#123;</span><br><span class="line">    <span class="string">"build_dir"</span> : <span class="string">"/.../build"</span>,</span><br><span class="line">    <span class="string">"python_exec"</span> : <span class="string">"/.../build/bin/vtkpython"</span>,</span><br><span class="line">    <span class="string">"WWW"</span> : <span class="string">"/.../build/www"</span>,</span><br><span class="line">    <span class="string">"source_dir"</span>: <span class="string">"/.../src"</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  ## ===============================</span><br><span class="line">  ## Application list with cmd line</span><br><span class="line">  ## ===============================</span><br><span class="line"></span><br><span class="line">  <span class="string">"apps"</span>: &#123;</span><br><span class="line">    <span class="string">"visualizer"</span>: &#123;</span><br><span class="line">        <span class="string">"cmd"</span>: [</span><br><span class="line">            <span class="string">"$&#123;python_exec&#125;"</span>, <span class="string">"-dr"</span>, <span class="string">"$&#123;visualizer_path&#125;/server/pvw-visualizer.py"</span>,</span><br><span class="line">            <span class="string">"--port"</span>, <span class="string">"$&#123;port&#125;"</span>, <span class="string">"--data-dir"</span>, <span class="string">"$&#123;dataDir&#125;"</span>, <span class="string">"-f"</span>, <span class="string">"--authKey"</span>, <span class="string">"$&#123;secret&#125;"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"ready_line"</span> : <span class="string">"Starting factory"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In order to run the Python launcher service, you will need to execute the following command line.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ cd ParaView/build</span><br><span class="line">$ ./bin/pvpython lib/site-package/vtk/web/launcher.py launcher.config</span><br></pre></td></tr></table></figure>
<p>or inside VTK</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ cd VTK/build</span><br><span class="line">$ ./bin/vtkpython Wrapping/Python/vtk/web/launcher.py launcher.config</span><br></pre></td></tr></table></figure>
<p> It is important to take special note a few of the details:</p>
<ul>
<li><p>The <code>apps</code> section gives the command lines required to start any of the visualization processes the launcher will be capable of starting.  We recommend always providing the <code>-dr</code> argument to <code>pvpython</code> so that it never tries to load any saved preferences it might find.</p>
</li>
<li><p>The <code>configuration</code> section gives several important values:</p>
<ul>
<li><code>sessionURL</code> gives the url needed to communicate with the visualization processes.  In the case of the Apache front end, Apache will recognize this url and re-write it so that Apache websocket forwarding can send the packets to the correct running process on the back end.  This <code>sessionURL</code> value needs to match what is expected by the Apache RewriteRule (given in the Apache virtual host configuration).  See the <a href="apache_front_end.html">Apache as a front end</a> guide for details.</li>
<li><code>proxy_file</code> gives the location of the mapping file that the launcher and front end will use to communicate about which session ids get mapped to which port.  The location of this file must concur with the Apache RewriteMap value (given in the Apache virtual host configuration).</li>
</ul>
</li>
<li><p><code>sessionData</code> is designed to allow you to specify that certain arbitrary key/value pairs should be included in the data returned to the client upon successful creation of the session.  In the example launcher config file above, we have added a key called <code>updir</code> with a value of <code>/Home</code> to the <code>sessionData</code> segment.  This will cause the launcher to perform normal substitutions on the on the value (in this case, none are needed as the value is simply <code>/Home</code>), and then include <code>&quot;updir&quot;: &quot;/Home&quot;</code> in the response when sessions are successfully created for clients.</p>
<ul>
<li>Note, however, that in the <code>configuration</code> section of the launcher config file, the <code>fields</code> key denotes a list of keys that will be used as a filter when deciding which data should be returned by the server in response to the client’s JSON payload.  In other words, if you want a key/value pair returned to the client when the session has been successfully started, make sure to include the key name of this desired pair in the <code>fields</code> list of the <code>configuration</code> section.  In the example launcher config above, therefore, we have added the key <code>updir</code> to the <code>fields</code> filter list so that the <code>&quot;updir&quot;:&quot;/Home&quot;</code> key pair will actually be returned to the client, instead of filtered out.</li>
</ul>
</li>
<li><p><code>resources</code> is a list of host/port-range combinations that the launcher will keep track of and assign to incoming client requests.  The launcher will take the hosts and associated port ranges for each host and create a master list of available “resources” it can assign to clients.  For example if <code>resources</code> are given as follows:</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"resources"</span> : [ &#123; <span class="string">"host"</span> : <span class="string">"host1.example.com"</span>, <span class="string">"port_range"</span> : [<span class="number">9001</span>, <span class="number">9003</span>] &#125;,</span><br><span class="line">                    &#123; <span class="string">"host"</span> : <span class="string">"host2.example.com"</span>, <span class="string">"port_range"</span> : [<span class="number">9001</span>, <span class="number">9003</span>] &#125; ],</span><br></pre></td></tr></table></figure>
<p>then the launcher will build the following list of “resources”:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    [<span class="string">"host1.example.com"</span>, <span class="number">9001</span>],</span><br><span class="line">    [<span class="string">"host1.example.com"</span>, <span class="number">9002</span>],</span><br><span class="line">    [<span class="string">"host1.example.com"</span>, <span class="number">9003</span>],</span><br><span class="line">    [<span class="string">"host2.example.com"</span>, <span class="number">9001</span>],</span><br><span class="line">    [<span class="string">"host2.example.com"</span>, <span class="number">9002</span>],</span><br><span class="line">    [<span class="string">"host2.example.com"</span>, <span class="number">9003</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>When a request comes in from a client, then the launcher will choose the first available resource, and use it to fulfill the request.  The host and port the launcher chooses will be available as <code>${host}</code> and <code>${port}</code> in both the <code>sessionURL</code> configuration variable, as well as in any of the <code>application</code> command lines.  When the process associated to the client request eventually ends, the [host, port] combination will again become available for future requests.  Until such time, that particular [host, port] combination, or “resource”, is considered by the launcher to be unavailable.</p>
<h2 id="Optional-Upload-Server" class="article-heading"><a href="#Optional-Upload-Server" class="headerlink" title="Optional Upload Server"></a>Optional Upload Server<a class="article-anchor" href="#Optional-Upload-Server" aria-hidden="true"></a></h2><p>The launcher can now start an optional file upload server to handle multipart POST requests on the same server and port as the launcher itself, as in the launcher config file example, above.  By specifying the <code>upload_dir</code> property in the <code>configuration</code> section of the launcher config file, you can tell the launcher to start the file upload server in such a way that uploaded files will get written in the path given by the value of the <code>upload_dir</code> property.  In order to use the upload server, you would then issue a POST request with a multipart file attachment to the url <code>http://launcher-host:launcher-port/upload</code>, replacing <code>launcher-host</code> and <code>launcher-port</code> with the correct values.</p>
<h2 id="Python-launcher-as-a-front-end" class="article-heading"><a href="#Python-launcher-as-a-front-end" class="headerlink" title="Python launcher as a front end"></a>Python launcher as a front end<a class="article-anchor" href="#Python-launcher-as-a-front-end" aria-hidden="true"></a></h2><p>It is worth mentioning briefly that the Python launcher can also be used as a front end.  Specifying a path for the <code>content</code> key of the <code>configuration</code> section of the laucher config json will cause the Python launcher to serve static content from listed directory.  The Python launcher can not, however, do websocket forwarding/tunnelling, so in this situation, clients would need direct access to the host/port combinations where the visualization processes are running.  Then, the <code>sessionURL</code> would take this form:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"sessionURL"</span> : <span class="string">"ws://$&#123;host&#125;:$&#123;port&#125;/ws"</span>,</span><br></pre></td></tr></table></figure>
<p>rather than this one:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"sessionURL"</span>: <span class="string">"ws://YOUR_HOST_NAME_TO_REPLACE/proxy?sessionId=$&#123;id&#125;&amp;path=ws"</span>,</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2024-05-30T15:27:14.851Z" itemprop="dateModified">Last updated: 2024-05-30</time>
                <a href="apache_front_end.html" class="article-footer-prev" title="Using Apache"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="launching_examples.html" class="article-footer-next" title="Examples"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#How-to-use-the-Python-Launcher"><span class="toc-text">How to use the Python Launcher</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Role-of-the-launcher"><span class="toc-text">Role of the launcher</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuration-of-the-launcher"><span class="toc-text">Configuration of the launcher</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optional-Upload-Server"><span class="toc-text">Optional Upload Server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-launcher-as-a-front-end"><span class="toc-text">Python launcher as a front end</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Overview</a><a href="compatibility.html" class="sidebar-link">Version Compatibility</a><strong class="sidebar-title">Miscellaneous</strong><a href="tools.html" class="sidebar-link">Developer guide</a><a href="troubleshooting.html" class="sidebar-link">Troubleshooting</a><a href="contributing.html" class="sidebar-link">Contributing</a><strong class="sidebar-title">Server</strong><a href="multi_user_setup.html" class="sidebar-link">Multi-user setup</a><a href="apache_front_end.html" class="sidebar-link">Using Apache</a><strong class="sidebar-title">Launchers</strong><a href="python_launcher.html" class="sidebar-link current">Python</a><a href="launching_examples.html" class="sidebar-link">Examples</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2024 <a href="https://www.kitware.com/" target="_blank">Kitware Inc.</a>
    </div>

    <div id="footer-links">
      <a href="https://github.com/kitware/visualizer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
    <a
      style="position: fixed; background: #00529b; color: white; top: 0; right: 0; height: 70px"
      href="https://www.kitware.com/careers"
    >
      <div style="position: relative; text-align: center;">
        <div
          style="margin-top: 5px; background: url(https://www.cmake.org/wp-content/uploads/2018/09/jobs_icon.png) no-repeat; background-size: 100%; width: 50px; height: 40px; margin: 5px auto 0;"
        ></div>
        <span style="padding: 5px 10px">Kitware is Hiring</span>
      </div>
    </a>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/visualizer/docs/" class="mobile-nav-link">Docs</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/kitware/visualizer" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Overview</a><a href="compatibility.html" class="mobile-nav-link">Version Compatibility</a><strong class="mobile-nav-title">Miscellaneous</strong><a href="tools.html" class="mobile-nav-link">Developer guide</a><a href="troubleshooting.html" class="mobile-nav-link">Troubleshooting</a><a href="contributing.html" class="mobile-nav-link">Contributing</a><strong class="mobile-nav-title">Server</strong><a href="multi_user_setup.html" class="mobile-nav-link">Multi-user setup</a><a href="apache_front_end.html" class="mobile-nav-link">Using Apache</a><strong class="mobile-nav-title">Launchers</strong><a href="python_launcher.html" class="mobile-nav-link current">Python</a><a href="launching_examples.html" class="mobile-nav-link">Examples</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="docs/python_launcher.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/visualizer/js/lang_select.js"></script>
<script src="/visualizer/js/toc.js"></script>
<script src="/visualizer/js/mobile_nav.js"></script>
<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>



</body>
</html>